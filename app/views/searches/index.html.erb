<%= link_to '書籍情報一覧', books_path%>
<%= link_to '新規書籍登録(自動)', new_isbn_path %>
<%= link_to '新規書籍登録(手動)', new_book_path %>
<%= link_to '未購入品一覧', search_status_index_path %>

<h1>書籍検索</h1>

<%= search_form_for @q,url:searches_path do |f| %>
  <%= f.label :title_cont, "タイトル" %>
  <%= f.search_field :title_cont %>
  <%= f.label :author_cont, "著者名" %>
  <%= f.search_field :author_cont %>
  <%= f.label :publisher_cont, "出版社" %>
  <%= f.search_field :publisher_cont %>
  <%= f.label :publisher_cont, "ISBNコード" %>
  <%= f.search_field :isbn_cont %>
  <%= f.label :status_cont, "状態" %>
  <%= f.search_field :status_cont %>
  
  <%= f.submit "検索" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>表紙</th>
      <th>タイトル</th>
      <th>著者</th>
      <th>出版社</th>
      <th>発行年</th>
      <th>研究班</th>
      <th>登録者</th>
      <th>備考</th>
      <th colspan="3">操作</th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <% if book.image&.url %>
        <td><%= image_tag book.image&.url, :size  => '60x80'%></td>
        <% end %>
        <td align="center"><%= book.title %></td>
        <td align="center"><%= book.author %></td>
        <td align="center"><%= book.publisher %></td>
        <td align="center"><%= book.published_at %></td>
        <td align="center"><%= book.group&.name %></td>
        <td align="center"><%= book.user&.name %></td>
        <td align="center"><%= book.comment %></td>
        <td><%= link_to '詳細', book %></td>
        <td><%= link_to '編集', edit_book_path(book) %></td>
        <td><%= link_to '削除', book, method: :delete, data: { confirm: '本当に削除してよろしいですか？' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @books %>
<br>